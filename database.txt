#Create database
CREATE DATABASE leukemia_analysisdm;
#Table Creations
-- Create Dim_MedicalHistory table

CREATE TABLE Dim_MedicalHistory (
    MedicalHistoryId SERIAL PRIMARY KEY,
    family_history VARCHAR(255),
    smoking_status VARCHAR(255),
    alcohol_consumption VARCHAR(255),
    radiation_exposure VARCHAR(255),
    infection_history VARCHAR(255),
    chronic_illness VARCHAR(255),
    immune_disorders VARCHAR(255),
    genetic_mutation VARCHAR(255)
);

-- Create Dim_Region table
CREATE TABLE Dim_Region (
    RegionId SERIAL PRIMARY KEY,
    country VARCHAR(255)
);

-- Create Dim_PatientInfo table
CREATE TABLE Dim_PatientInfo (
    Patient_id SERIAL PRIMARY KEY,
    MedicalHistoryId INT REFERENCES Dim_MedicalHistory(MedicalHistoryId),
    age INT,
    gender VARCHAR(50),
    socioeconomic_status VARCHAR(255),
    urban_rural VARCHAR(50)
);

-- Create Fact_Leukemia table (corrected name from Fact_Lexkemia)
CREATE TABLE Fact_Leukemia (
    Patient_Id INT REFERENCES Dim_PatientInfo(Patient_id),
    RegionId INT REFERENCES Dim_Region(RegionId),
    Leukemia_Status VARCHAR(255),
    WBC_Count FLOAT, 
    RBC_Count FLOAT,
    Platelet_Count FLOAT,
    Hemoglobin_level FLOAT,
    Bone_Marrow_Blasts FLOAT,
    BMI FLOAT,
    PRIMARY KEY (PatientId, RegionId)
);

